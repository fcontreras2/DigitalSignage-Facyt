{% extends "DSFacytInfrastructureBundle:Display:base.html.twig" %}

{% block stylesheets %}
    {% if app.environment == "dev" %}
        <link rel="stylesheet" href="{{ asset('bundles/dsfacytinfrastructure/assets/DSFacyt/stylesheets/display.css') }}"/>
        <link rel="stylesheet" href="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/css/angular-clock.css') }}"/>
        <link rel="stylesheet" href="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/css/videogular.css') }}"/>
    {% else %}
        {% stylesheets
        '@DSFacytInfrastructureBundle/Resources/public/assets/DSFacyt/dist/css/template.css'
        %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
f
        {% endstylesheets %}
    {% endif %}

{% endblock %}

{% block body %}
    <div class="container-display" ng-app="TransmitionModule" ng-controller="TransmitionController as controller" style="height: 100vh !important;width: 100%;" >
        <div class="block-media">
        <div id="carousel-images" class="carousel slide carousel-fade" data-ride="carousel" data-pause="false" ng-show="showImages">
            <div class="carousel-inner">
                <div class="item" ng-repeat="n in [] | range:images.length" ng-class="{'active':!$index}">
                    <center>
                        <div style="height:85.5vh;">
                            <img src="/uploads/images/{[{images[$index].image_url}]}" style="
                            vertical-align: middle;
                            max-height: 85vh;
                            background-position: center center;
                            background-repeat: no-repeat;">
                        </div>
                        <div class="title-image" style="
                            background: blue;
                            padding: 10px;
                            color: white;
                            font-size: 127%;
                        ">
                            <span>{[{images[$index].title}]}</span>
                        </div>
                    </center>
                </div>
            </div>
        </div>
         <videogular vg-theme="controller.config.theme" ng-show="showVideos" vg-player-ready="controller.onPlayerReady($API)" vg-complete="controller.onCompleteVideo()" vg-auto-play="true">
            <vg-media vg-src="controller.config.sources"
                     vg-plays-inline="true">
            </vg-media>
 
            <vg-controls>
                <vg-play-pause-button></vg-play-pause-button>
                <vg-time-display>{[{ currentTime | date:'mm:ss' }]}</vg-time-display>
                <vg-scrub-bar>
                    <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
                </vg-scrub-bar>
                <vg-time-display>{[{ timeLeft | date:'mm:ss' }]}</vg-time-display>
                <vg-volume>
                    <vg-mute-button></vg-mute-button>
                    <vg-volume-bar></vg-volume-bar>
                </vg-volume>
                <vg-fullscreen-button></vg-fullscreen-button>
            </vg-controls>

            <vg-overlay-play></vg-overlay-play>
            <vg-poster vg-url='controller.config.plugins.poster'></vg-poster>
        </videogular>        
        </div>
        <div class="block-info">
            <div class="block-time">
                <div class="block-time" style="margin: 10px">
                    <div class="time"  >
                        <ds-widget-clock show-digital digital-format="'hh:mm:ss a '">></ds-widget-clock>
                    </div>
                    <div class="date">
                        <ds-widget-clock show-digital digital-format="'EEEE MMMM d'">></ds-widget-clock>
                    </div>
                </div>
            </div>
            <div class="block-text">
                <div id="carousel-texts" class="carousel slide carousel-fade" data-ride="carousel" data-pause="false">
                    <div class="carousel-inner">
                        <div class="item" ng-repeat="n in [] | range:texts.length" ng-class="{'active':!$index}">
                            <div class="panel panel-default" data-interval="500">
                                <div class="panel-body">
                                    <div class="text-profile-2" style="width:100%;display:block;float:left; margin-bottom:2%; border-bottom:1px solid black;padding-bottom:2%">
                                        <div class="text-profile-image" style="width:30%" ng-show="texts[$index].image_profile">
                                            <img src="/uploads/images/{[{texts[$index].image_profile}]}" alt="" style="vertical-align:middle;float:left;width: 80%; background-position: center center;  background-repeat: no-repeat;float:left;max-height:10vh;">
                                        </div>
                                        <div class="text-profile-info" style="width:100%;font-size:110%">
                                            <span><b>Usuario: {[{texts[$index].user_full_name}]}</b></span>
                                            <br>
                                            <span><b>Publicado : {[{texts[$index].start_date}]}</b></span>
                                        </div>
                                    </div>                                    

                                    <div class="tex1312t-info" style="width:100%;float:left;">
                                        <div class="text-title" style="font-size:145%">
                                            <b>{[{ texts[$index].title }]}</b>
                                        </div>
                                        <div class="text-info" style="font-size:160%">
                                            --{[{ texts[$index].info }]}--
                                        </div>                                    
                                    </div>
                                </div>
                            </div>
                        </div>                        
                    </div>                    
                </div>
            </div>
        </div>
        <div class="block-quick-notes" >
            <div id="carousel-quick-notes" class="carousel slide carousel-fade" data-ride="carousel" data-pause="false">
                <div class="carousel-inner">
                    <div class="item" ng-repeat="n in [] | range:quickNotes.length" ng-init="i_parent = $index "ng-class="{'active':!i_parent}" >
                        <p>
                         {[{quickNotes[$index].info}]}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}

{% block javascripts%}
    {{ parent() }}
    
    {% if data is defined %}
    <script type="text/javascript">
        var data = "{{ data }}";
        var div = document.createElement('div');
        div.innerHTML = data;
        data = div.firstChild.nodeValue;
        data = JSON.parse(data);
    </script>
    {% endif %}
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

    {% if app.environment == "dev" %}
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/jquery.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/bootstrap.js') }}"></script>        
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/angular.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/angular-repeat-n.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/moment.js') }}"></script>        
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/angular-clock.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/angular-sanitize.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/videogular.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/vg-controls.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/vg-overlay-play.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/vg-poster.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/vendor/js/vg-buffering.js') }}"></script>    
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/DSFacyt/angular/Display/Transmition/TransmitionModule.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/DSFacyt/angular/Display/Transmition/TransmitionService.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/dsfacytinfrastructure/assets/DSFacyt/angular/Display/Transmition/TransmitionController.js') }}"></script>
    
    {% endif %}

    <script type="text/javascript">
        
        jQuery(function($) {
            $('#carousel-texts').carousel({
                interval: "{{config.time_text_transition}}"*1000
            });            

            $('#carousel-images').carousel({
                interval: "{{config.time_image_transition}}"*1000
            });            
        
            $('#carousel-quick-notes').carousel({
                interval: "{{config.time_quick_note_transition}}"*1000
            });
        }); 
    </script>

{% endblock javascripts %}